<!-- Include the header partial file -->
<!-- 
  This line imports shared HTML code (like <head>, <link>, or navigation bar)
  from the file:  views/partials/header.ejs
  It helps you avoid repeating the same header code in every page.
-->
<%- include("partials/header") %>

    <!-- Container for the heading and Add Todo button -->
    <div class="table-container">
      <!-- Page title -->
      <h2 class="todo-title">Todo List</h2>

      <!-- Button for adding a new todo -->

      <a class="btn btn-add" href="/add-todo">Add Todo</a>
    </div>
    <br />

    <!-- Table to display all todos -->
    <table>
      <!-- Table headers -->
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Created at</th>
        <th>Updated at</th>
        <th>Action</th>
      </tr>
    <!-- Loop through all Todo items passed from the server -->
    <% for(let i = 0; i < todos.length; i++) { %>
      <tr>
        <!-- Display each todo's title and description -->
        <td><%= todos[i].title %></td>
        <td><%= todos[i].desc %></td>

        <!-- Display creation and update timestamps -->
        <td><%= moment(todos[i].createdAt).format("MMM DD, YYYY, HH:mm:ss") %></td>
        <td><%= moment(todos[i].updatedAt).format("MMM DD, YYYY, HH:mm:ss") %></td>

        <!-- 
        Edit button → links to /update-todo page, passing the todo's unique ID in the URL.
        Delete button → navigates to /delete-todo page with the todo's ID in query string
        (The delete page will ask for confirmation before removing the todo)
        -->
        <td>
          <a class="btn btn-update" href="/update-todo?id=<%= todos[i]._id %>">Edit</a>
          <a class="btn btn-delete" href="/delete-todo?id=<%= todos[i]._id %>">Delete</a>
        </td>
      </tr>
    <% } %>
  </table> 

<!-- Include the footer partial file -->
<!-- 
  This imports shared HTML code for the page footer (like closing tags, scripts, etc.)
  from the file:  views/partials/footer.ejs
  It keeps your code organized and reusable across multiple pages.
-->
<%- include("partials/footer") %>
